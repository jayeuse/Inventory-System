# System Architecture Diagram

## Multi-Tier Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                    EXTERNAL SERVICES                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                         Google OAuth 2.0 / Authenticator API                     │    │
│  │                    • OTP Generation  • MFA  • Password Recovery                  │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────────────┬─────────────────────────────────────────────┘
                                            │
                                            ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              PRESENTATION LAYER (Client-Side)                            │
│                                                                                          │
│  ┌────────────────────────────────┐      ┌────────────────────────────────┐             │
│  │      INVENTORY DASHBOARD       │      │      INTEGRATED POS SYSTEM     │             │
│  │  ┌──────────────────────────┐  │      │  ┌──────────────────────────┐  │             │
│  │  │ • Dashboard Analytics    │  │      │  │ • Sales Interface        │  │             │
│  │  │ • Products Management    │  │      │  │ • Items Browser          │  │             │
│  │  │ • Inventory Control      │  │      │  │ • Transaction History    │  │             │
│  │  │ • Orders & Receiving     │  │      │  │ • Back Office Analytics  │  │             │
│  │  │ • Transaction Logs       │  │      │  └──────────────────────────┘  │             │
│  │  │ • Settings & Config      │  │      │                                │             │
│  │  └──────────────────────────┘  │      │  Technology:                   │             │
│  │                                │      │  HTML5 | CSS3 | JavaScript     │             │
│  │  Technology:                   │      │  Bootstrap (Responsive UI)     │             │
│  │  HTML5 | CSS3 | JavaScript     │      │                                │             │
│  │  Bootstrap (Responsive UI)     │      │                                │             │
│  └────────────────────────────────┘      └────────────────────────────────┘             │
│                          │                              │                                │
│                          └──────────────┬───────────────┘                                │
│                                         │                                                │
│                              RESTful API Requests                                        │
│                              (JSON over HTTPS)                                           │
└─────────────────────────────────────────┬────────────────────────────────────────────────┘
                                          │
                                          ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           APPLICATION LAYER (Business Logic)                             │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                          Django Framework + Django REST Framework                │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────────────┐      │
│  │   API ENDPOINTS     │  │   BUSINESS LOGIC    │  │    ACCESS CONTROL           │      │
│  │  ─────────────────  │  │  ─────────────────  │  │  ─────────────────────────  │      │
│  │  • /api/auth/       │  │  • Stock Deduction  │  │  • Session Validation       │      │
│  │  • /api/products/   │  │  • Batch Expiry     │  │  • Role-Based Access (RBAC) │      │
│  │  • /api/inventory/  │  │  • Order Processing │  │  • Permission Enforcement   │      │
│  │  • /api/orders/     │  │  • Price Calculate  │  │  • Token Authentication     │      │
│  │  • /api/pos/        │  │  • Status Updates   │  │                             │      │
│  │  • /api/reports/    │  │  • Analytics        │  │  Roles: Admin | Staff | Clerk│     │
│  └─────────────────────┘  └─────────────────────┘  └─────────────────────────────┘      │
│                                                                                          │
│                                    Django ORM                                            │
│                              (Object-Relational Mapping)                                 │
└─────────────────────────────────────────┬────────────────────────────────────────────────┘
                                          │
                                          ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           DATA PERSISTENCE LAYER (Database)                              │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                                  PostgreSQL                                      │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐ ┌─────────────────┐  │
│  │  USER MANAGEMENT  │ │  PRODUCT CATALOG  │ │ INVENTORY CONTROL │ │ ORDER MANAGEMENT│  │
│  │  ───────────────  │ │  ───────────────  │ │ ───────────────── │ │ ────────────────│  │
│  │  • auth_user      │ │  • category       │ │  • product_stocks │ │  • order        │  │
│  │  • user_info      │ │  • subcategory    │ │  • product_batch  │ │  • order_item   │  │
│  │  • otp            │ │  • product        │ │  • transaction    │ │  • receive_order│  │
│  └───────────────────┘ └───────────────────┘ └───────────────────┘ └─────────────────┘  │
│                                                                                          │
│  ┌───────────────────┐ ┌───────────────────┐                                            │
│  │ SUPPLIER MGMT     │ │ SYSTEM/AUDIT      │                                            │
│  │ ───────────────   │ │ ───────────────   │                                            │
│  │ • supplier        │ │ • archive_log     │                                            │
│  │ • supplier_product│ │ • content_type    │                                            │
│  └───────────────────┘ └───────────────────┘                                            │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Data Flow Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                   EVENT-DRIVEN DATA FLOW                                 │
└─────────────────────────────────────────────────────────────────────────────────────────┘

                    ┌─────────────────┐
                    │   USER ACTION   │
                    │  (Sale/Order)   │
                    └────────┬────────┘
                             │
                             ▼
              ┌──────────────────────────────┐
              │     PRESENTATION LAYER       │
              │  (POS Interface / Dashboard) │
              └──────────────┬───────────────┘
                             │
                    HTTP POST Request
                    (JSON Payload)
                             │
                             ▼
              ┌──────────────────────────────┐
              │      APPLICATION LAYER       │
              │   (Django REST Framework)    │
              │                              │
              │  ┌────────────────────────┐  │
              │  │  1. Validate Request   │  │
              │  │  2. Check Permissions  │  │
              │  │  3. Execute Logic      │  │
              │  │  4. Update Database    │  │
              │  │  5. Return Response    │  │
              │  └────────────────────────┘  │
              └──────────────┬───────────────┘
                             │
              ┌──────────────┴───────────────┐
              │                              │
              ▼                              ▼
┌─────────────────────────┐    ┌─────────────────────────┐
│   STOCKS TABLE          │    │   TRANSACTION TABLE     │
│   ─────────────         │    │   ─────────────────     │
│   UPDATE total_on_hand  │    │   INSERT new record     │
│   UPDATE status         │    │   (IN/OUT/ADJ)          │
└─────────────────────────┘    └─────────────────────────┘
              │                              │
              └──────────────┬───────────────┘
                             │
                             ▼
              ┌──────────────────────────────┐
              │    REAL-TIME REFLECTION      │
              │  ─────────────────────────   │
              │  Dashboard instantly shows   │
              │  updated stock levels        │
              └──────────────────────────────┘
```

---

## System Integration Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           INVENTORY ←→ POS INTEGRATION                                   │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────┐                              ┌─────────────────────┐
│  INVENTORY SYSTEM   │                              │     POS SYSTEM      │
│  (Admin/Staff)      │                              │     (Clerk)         │
├─────────────────────┤                              ├─────────────────────┤
│                     │                              │                     │
│  • Add Products     │──────┐              ┌───────▶│  • Browse Products  │
│  • Manage Batches   │      │              │        │  • Process Sales    │
│  • Create Orders    │      │              │        │  • View History     │
│  • Receive Stock    │      │              │        │                     │
│  • View Analytics   │      │              │        │                     │
│                     │      │              │        │                     │
└─────────────────────┘      │              │        └─────────────────────┘
                             │              │
                             ▼              │
                    ┌────────────────────────────┐
                    │                            │
                    │     UNIFIED BACKEND        │
                    │     ───────────────        │
                    │                            │
                    │  ┌──────────────────────┐  │
                    │  │   Django REST API    │  │
                    │  │   Single Source of   │  │
                    │  │   Truth for Both     │  │
                    │  │   Systems            │  │
                    │  └──────────────────────┘  │
                    │                            │
                    │  ┌──────────────────────┐  │
                    │  │     PostgreSQL       │  │
                    │  │   Shared Database    │  │
                    │  └──────────────────────┘  │
                    │                            │
                    └────────────────────────────┘
                                  │
                                  │
                    ┌─────────────┴─────────────┐
                    │                           │
                    ▼                           ▼
           ┌─────────────────┐        ┌─────────────────┐
           │  Stock In (IN)  │        │  Stock Out (OUT)│
           │  ─────────────  │        │  ──────────────  │
           │  Order Receive  │        │  POS Sale        │
           │  +quantity      │        │  -quantity       │
           └─────────────────┘        └─────────────────┘
```

---

## Authentication Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              AUTHENTICATION & SECURITY FLOW                              │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌──────────┐     ┌──────────────┐     ┌─────────────┐     ┌──────────────┐
│   USER   │────▶│  LOGIN PAGE  │────▶│  VALIDATE   │────▶│  SEND OTP    │
│          │     │  (Username/  │     │  CREDENTIALS│     │  (via Email) │
└──────────┘     │   Password)  │     └─────────────┘     └──────┬───────┘
                 └──────────────┘                                │
                                                                 │
                                                                 ▼
                                                    ┌────────────────────┐
                                                    │   Google OAuth /   │
                                                    │   Authenticator    │
                                                    │   API              │
                                                    └─────────┬──────────┘
                                                              │
                                                              │ OTP Generated
                                                              │
                                                              ▼
┌──────────────┐     ┌──────────────┐     ┌─────────────┐     ┌──────────────┐
│   DASHBOARD  │◀────│   GRANT      │◀────│  VERIFY     │◀────│  ENTER OTP   │
│   ACCESS     │     │   SESSION    │     │  OTP CODE   │     │  PAGE        │
│              │     │   TOKEN      │     │             │     │              │
└──────────────┘     └──────────────┘     └─────────────┘     └──────────────┘

                         ┌─────────────────────────────────────┐
                         │         ROLE-BASED ACCESS           │
                         ├─────────────────────────────────────┤
                         │  ADMIN  │ Full System Access        │
                         │  STAFF  │ Inventory + Orders        │
                         │  CLERK  │ POS Sales Only            │
                         └─────────────────────────────────────┘
```

---

## Technology Stack Summary

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  TECHNOLOGY STACK                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │                              FRONT END                                           │   │
│   │   ┌─────────┐  ┌─────────┐  ┌─────────────┐  ┌────────────┐                     │   │
│   │   │  HTML5  │  │  CSS3   │  │  Bootstrap  │  │ JavaScript │                     │   │
│   │   │ Structure│  │ Styling │  │ Responsive  │  │ Interactivity│                   │   │
│   │   └─────────┘  └─────────┘  └─────────────┘  └────────────┘                     │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │                              BACK END                                            │   │
│   │   ┌───────────────────────┐  ┌───────────────────────────────┐                  │   │
│   │   │    Django (Python)    │  │  Django REST Framework (DRF)  │                  │   │
│   │   │   Server-side Logic   │  │     RESTful API Endpoints     │                  │   │
│   │   └───────────────────────┘  └───────────────────────────────┘                  │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │                              DATABASE                                            │   │
│   │   ┌───────────────────────┐  ┌───────────────────────────────┐                  │   │
│   │   │      PostgreSQL       │  │        Django ORM             │                  │   │
│   │   │   Relational DBMS     │  │   Object-Relational Mapping   │                  │   │
│   │   └───────────────────────┘  └───────────────────────────────┘                  │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │                           EXTERNAL SERVICES                                      │   │
│   │   ┌───────────────────────────────────────────────────────┐                     │   │
│   │   │           Google OAuth 2.0 / Authenticator API        │                     │   │
│   │   │      OTP Generation | MFA | Secure Authentication     │                     │   │
│   │   └───────────────────────────────────────────────────────┘                     │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```
